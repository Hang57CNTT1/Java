CREATE DATABASE QUANLYBANHANG
GO
USE QUANLYBANHANG
GO
CREATE TABLE KHACHHANG
(
	MAKH VARCHAR(10) PRIMARY KEY,
	TENKH NVARCHAR(30) NOT NULL,
	DIACHI NVARCHAR(50) NOT NULL,
	DIENTHOAI VARCHAR(15) NOT NULL
)
GO
CREATE TABLE NHANVIEN
(
	MANV VARCHAR(10) PRIMARY KEY,
	TENNV NVARCHAR(30) NOT NULL,
	GIOITINH BIT DEFAULT(1),
	DIACHI NVARCHAR(100) NOT NULL,
	DIENTHOAI VARCHAR(15) NOT NULL,
	NGAYSINH DATETIME NOT NULL
)
GO
CREATE TABLE CHATLIEU
(
	MACHATLIEU VARCHAR(10) PRIMARY KEY,
	TENCHATLIEU NVARCHAR(50) NOT NULL
)
GO
CREATE TABLE HANGHOA
(
	MAHANG VARCHAR(10) PRIMARY KEY,
	TENHANG NVARCHAR(50) NOT NULL,
	MACHATLIEU VARCHAR(10) FOREIGN KEY REFERENCES CHATLIEU(MACHATLIEU),
	SOLUONG INT NOT NULL,
	DONGIANHAP MONEY NOT NULL,
	DONGIABAN MONEY NOT NULL,
	ANHHANG NVARCHAR(20) NOT NULL,
	GHICHU NVARCHAR(100) NOT NULL
)
GO
CREATE TABLE CTHDBAN
(
	MAHD VARCHAR(10) PRIMARY KEY,
	MAHANG VARCHAR(10) FOREIGN KEY REFERENCES HANGHOA(MAHANG),
	SOLUONG INT NOT NULL DEFAULT(0),
	DONGIA MONEY NOT NULL,
	GIAMGIA FLOAT NOT NULL,
	THANHTIEN MONEY NOT NULL
)
GO
CREATE TABLE HOADONBAN
(
	MAHD VARCHAR(10) PRIMARY KEY,
	MANV VARCHAR(10) FOREIGN KEY REFERENCES NHANVIEN(MANV),
	NGAYBAN DATETIME NOT NULL,
	MAKH VARCHAR(10) FOREIGN KEY REFERENCES KHACHHANG(MAKH),
	TONGTIEN MONEY NOT NULL
)
GO
 INSERT INTO CHATLIEU VALUES('MCL001', N'Sắt'),('MCL002', N'Đồng')
 GO
 INSERT INTO HANGHOA VALUES ('H001', N'Bút sắt', 'MCL001', 10, 10000, 12000, N'butsat.jpg', N'Đây là cây bút'),
							('H002', N'Đồng tiền', 'MCL002', 30, 12000, 15000, N'dontien.jpg', N'Đây là đồng tiền')
 GO
 INSERT INTO CTHDBAN VALUES ('HDB001', 'H001', 5, 60000, 5000, 55000),('HDB002', 'H002', 10, 150000, 0, 150000)
 GO
 INSERT INTO KHACHHANG VALUES('K001', N'Huy', N'18DK', '09133746353'),('K002', N'Minh', N'20LDC', '01694857685')
 GO
 INSERT INTO NHANVIEN VALUES('NV001', N'TNQBAO', 1, N'12 DK', N'0912836364837', '10/5/1996 '),
							('NV002', N'TNMINH', 0, N'20LDC', N'091347837463', '3/21/1997 ')
GO
INSERT INTO HOADONBAN VALUES ('HDB001', 'NV001', '5/15/2017 ', 'K001', 55000),
							('HDB002', 'NV002', '5/20/2017 ', 'K002', 150000),
							('HDB003', 'NV001', '4/15/2017 ', 'K002', 61200),
							('HDB005', 'NV002', '5/15/2017 ', 'K001', 67500)

